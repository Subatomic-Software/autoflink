{
  "kafkaSource": {
    "kafka": {
      "broker": "localhost:9092",
      "topic": "tester",
      "groupid": "test",
      "format": "json"
    },
    "filter": {
      "func": {
        "field": "embedder.embedded",
        "comp": "neq",
        "val": "embed2"
      },
      "filter": {
        "func": {
          "field": "value",
          "comp": "lt",
          "val": 5
        },
        "map": {
          "func": {
            "op": "upsert",
            "target": "value1",
            "eval": "value+value"
          },
          "map": {
            "func": {
              "op": "upsert",
              "target": "value2",
              "eval": "value1+key"
            },
            "map": {
              "func": {
                "op": "remove",
                "target": "value"
              },
              "kafkaSink": {
                "kafka": {
                  "broker": "localhost:9092",
                  "topic": "testerout",
                  "format": "json"
                }
              }
            }
          }
        },
        "print": {
          "name": "filter1"
        }
      }
    }
  }
}